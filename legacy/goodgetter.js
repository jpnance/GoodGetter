var splits = {
	'yi': {
		'1-1': {
			name: 'Make Eggs, Throw Eggs',
			theory: '0:43.59',
			time: '0:46.03'
		},
		'1-2': {
			name: 'Watch Out Below!',
			theory: '0:43.76',
			time: '0:44.53'
		},
		'1-3': {
			name: 'The Cave of Chomp Rock',
			theory: '1:04.51',
			time: '1:05.62'
		},
		'1-4': {
			name: 'Burt the Bashful\'s Fort',
			theory: '2:08.01',
			time: '2:12.57'
		},
		'1-5': {
			name: 'Hop! Hop! Donut Lifts',
			theory: '2:50.02',
			time: '2:50.02'
		},
		'1-6': {
			name: 'Shy-Guys on Stilts',
			theory: '1:13.81',
			time: '1:17.42'
		},
		'1-7': {
			name: 'Touch Fuzzy, Get Dizzy',
			theory: '0:55:67',
			time: '0:58.27'
		},
		'1-8': {
			name: 'Salvo the Slime\'s Castle',
			theory: '1:53.49',
			time: '2:09.97'
		},
		'2-1': {
			name: 'Visit Koopa and Para-Koopa',
			theory: '1:46.87',
			time: '1:50.39'
		},
		'2-2': {
			name: 'The Baseball Boys',
			theory: '1:59.45',
			time: '2:07.48'
		},
		'2-3': {
			name: 'What\'s Gusty Taste Like?',
			theory: '1:21.17',
			time: '1:23.56'
		},
		'2-4': {
			name: 'Bigger Boo\'s Fort',
			theory: '1:50.59',
			time: '1:56.53'
		},
		'2-5': {
			name: 'Watch Out for Lakitu!',
			theory: '1:02.88',
			time: '1:03.70'
		},
		'2-6': {
			name: 'The Cave of the Mystery Maze',
			theory: '1:17.52',
			time: '1:20.42'
		},
		'2-7': {
			name: 'Lakitu\'s Wall',
			theory: '1:27.79',
			time: '1:37.21'
		},
		'2-8': {
			name: 'The Potted Ghost\'s Castle',
			theory: '3:27.16',
			time: '3:41.81'
		},
		'3-1': {
			name: 'Welcome to Monkey World!',
			theory: '1:22.04',
			time: '1:24.64'
		},
		'3-2': {
			name: 'Jungle Rhythm...',
			theory: '0:59.32',
			time: '1:02.79'
		},
		'3-3': {
			name: 'Nep-Enut\'s Domain',
			theory: '2:36.61',
			time: '2:43.91'
		},
		'3-4': {
			name: 'Prince Froggy\'s Fort',
			theory: '2:48.26',
			time: '2:53.11'
		},
		'3-5': {
			name: 'Jammin\' through the Trees',
			theory: '1:13.40',
			time: '1:17.48'
		},
		'3-6': {
			name: 'The Cave of Harry Hedgehog',
			theory: '1:02.53',
			time: '1:06.75'
		},
		'3-7': {
			name: 'Monkeys\' Favorite Lake',
			theory: '1:27.96',
			time: '1:31.83'
		},
		'3-8': {
			name: 'Naval Piranha\'s Castle',
			theory: '1:40.03',
			time: '1:54.74'
		},
		'4-1': {
			name: 'GO! GO! MARIO!!',
			theory: '1:36.32',
			time: '1:41.03'
		},
		'4-2': {
			name: 'The Cave of the Lakitus',
			theory: '1:08.98',
			time: '1:12.23'
		},
		'4-3': {
			name: 'Don\'t Look Back!',
			theory: '1:15.88',
			time: '1:19.17'
		},
		'4-4': {
			name: 'Marching Milde\'s Fort',
			theory: '4:58.90',
			time: '5:07.16'
		},
		'4-5': {
			name: 'Chomp Rock Zone',
			theory: '1:14.28',
			time: '1:16.69'
		},
		'4-6': {
			name: 'Lake Shore Paradise',
			theory: '1:32.86',
			time: '1:36.23'
		},
		'4-7': {
			name: 'Ride like the Wind',
			theory: '1:14.15',
			time: '1:17.82'
		},
		'4-8': {
			name: 'Hookbill the Koopa\'s Castle',
			theory: '2:48.58',
			time: '3:07.30'
		},
		'5-1': {
			name: 'BLIZZARD!!!',
			theory: '1:36.46',
			time: '1:45.00'
		},
		'5-2': {
			name: 'Ride the Sky Lifts',
			theory: '1:24.11',
			time: '1:30.51'
		},
		'5-3': {
			name: 'Danger - Icy Conditions Ahead',
			theory: '2:45.76',
			time: '2:53.34'
		},
		'5-4': {
			name: 'Sluggy the Unshaven\'s Fort',
			theory: '3:27.49',
			time: '5:02.06'
		},
		'5-5': {
			name: 'Goonie Rides!',
			theory: '1:44.59',
			time: '1:50.61'
		},
		'5-6': {
			name: 'Welcome to Cloud World',
			theory: '4:07.28',
			time: '4:11.84'
		},
		'5-7': {
			name: 'Shifting Platforms Ahead',
			theory: '1:35.62',
			time: '1:39.08'
		},
		'5-8': {
			name: 'Raphael the Raven\'s Castle',
			theory: '2:47.32',
			time: '3:01.21'
		},
		'6-1': {
			name: 'Scary Skeleton Goonies!',
			theory: '1:42.64',
			time: '1:42.94'
		},
		'6-2': {
			name: 'The Cave of the Bandits',
			theory: '1:34.91',
			time: '1:42.54'
		},
		'6-3': {
			name: 'Beware the Spinning Logs',
			theory: '1:08.39',
			time: '1:10.10'
		},
		'6-4': {
			name: 'Tap-Tap the Red Nose\'s Fort',
			theory: '2:42.53',
			time: '3:01.68'
		},
		'6-5': {
			name: 'The Very Loooooong Cave',
			theory: '4:10.50',
			time: '4:20.04'
		},
		'6-6': {
			name: 'The Deep, Underground Maze',
			theory: '1:06.38',
			time: '1:25.18'
		},
		'6-7': {
			name: 'KEEP MOVING!!!!',
			theory: '3:03.64',
			time: '3:22.24'
		},
		'6-8': {
			name: 'King Bowser\'s Castle',
			theory: '5:07.20',
			time: '5:23.94'
		}
	},
	'sm64': {
		'BOB 1': {
			name: 'Behind Chain Chomp\'s Gate',
			time: '0:32.17'
		},
		'Secret 1': {
			name: 'The Princess\'s Secret Slide (Fast)',
			time: '0:24.12'
		},
		'WF 1 & 2': {
			name: '100 Coins & Red Coins on the Floating Isle',
			time: '1:34.01'
		},
		'WF 3': {
			name: 'Blast Away the Wall',
			time: '0:20.22'
		},
		'WF 4': {
			name: 'Shoot into the Wild Blue',
			time: '0:15.45'
		},
		'WF 5': {
			name: 'Chip Off Whomp\'s Block',
			time: '0:32.27'
		},
		'WF 6': {
			name: 'To the Top of the Fortress',
			time: '0:19.56'
		},
		'WF 7': {
			name: 'Fall onto the Caged Island',
			time: '0:21.43'
		},
		'Secret 2': {
			name: 'The Princess\'s Secret Slide (Normal)',
			time: '0:27.46'
		},
		'Secret 3': {
			name: 'Tower of the Wing Cap',
			time: '0:50.66'
		},
		'BitDW and Secret 4': {
			name: 'Red Coins & First Key',
			time: '1:39.00'
		},
		'BOB 2': {
			name: 'Shoot to the Island in the Sky',
			time: '0:29.25'
		},
		'CCM 1': {
			name: 'Li\'l Penguin Lost',
			time: '0:22.71'
		},
		'CCM 2': {
			name: 'Slip Slidin\' Away',
			time: '0:33.16'
		},
		'CCM 3': {
			name: 'Wall Kicks Will Work',
			time: '0:15.60'
		},
		'CCM 4 & 5': {
			name: '100 Coins & Big Penguin Race',
			time: '1:34.39'
		},
		'BBH 1': {
			name: 'Secret of the Haunted Books',
			time: '0:16.67'
		},
		'BBH 2': {
			name: 'Big Boo\'s Balcony',
			time: '0:44.05'
		},
		'Secret 5': {
			name: 'Mips',
			time: null
		},
		'LLL 1': {
			name: '8-Coin Puzzle with 15 Pieces',
			time: '0:17.62'
		},
		'LLL 2': {
			name: 'Bully the Bullies',
			time: '0:31.06'
		},
		'LLL 3': {
			name: 'Boil the Big Bully ',
			time: '0:25.07'
		},
		'LLL 4': {
			name: 'Red-Hot Log Rolling',
			time: '0:18.44'
		},
		'LLL 5': {
			name: 'Elevator Tour in the Volcano',
			time: '0:30.47'
		},
		'LLL 6': {
			name: 'Hot-Foot It into the Volcano',
			time: '0:42.18'
		},
		'SSL 1': {
			name: 'In the Talons of the Big Bird',
			time: '0:21.64'
		},
		'SSL 2': {
			name: 'Stand Tall on the Four Pillars',
			time: '0:39.96'
		},
		'SSL 3': {
			name: 'Shining atop the Pyramid',
			time: '0:10.43'
		},
		'Secret 6': {
			name: 'Toad by HMC',
			time: null
		},
		'HMC 1': {
			name: 'A-maze-ing Emergency Exit',
			time: '0:17.17'
		},
		'HMC 2': {
			name: 'Navigating the Toxic Maze',
			time: '0:56.85'
		},
		'HMC 3': {
			name: 'Swimming Beast in the Cavern',
			time: '0:22.93'
		},
		'HMC 4': {
			name: 'Metal-Head Mario Can Move!',
			time: '0:45.29'
		},
		'HMC 5': {
			name: 'Watch for Rolling Rocks',
			time: '0:25.38'
		},
		'DDD 1': {
			name: 'Chests in the Current',
			time: '1:14.92'
		},
		'DDD 2': {
			name: 'Board Bowser\'s Sub',
			time: '1:00.00'
		},
		'DDD 3': {
			name: 'The Manta Ray\'s Reward',
			time: '0:50.11'
		},
		'BitFS & Secret 7': {
			name: 'Red Coins & Second Key',
			time: '2:14.34'
		},
		'WDW 1 & 2': {
			name: '100 Coins & Secrets in the Shallows and Sky',
			time: '1:45.33'
		},
		'WDW 3': {
			name: 'Shocking Arrow Lifts',
			time: '0:15.86'
		},
		'WDW 4': {
			name: 'Express Elevator--Hurry Up!',
			time: '0:31.17'
		},
		'WDW 5': {
			name: 'Top o\' the Town',
			time: '0:25.06'
		},
		'THI 1': {
			name: 'Pluck the Piranha Flower',
			time: '0:29.05'
		},
		'THI 2': {
			name: 'Five Itty Bitty Secrets',
			time: '0:36.97'
		},
		'THI 3': {
			name: 'The Tip Top of the Huge Island',
			time: '0:26.92'
		},
		'Secret 8': {
			name: 'Toad by TTM',
			time: null
		},
		'TTM 1': {
			name: 'Breathtaking View from Bridge',
			time: '0:32.38'
		},
		'TTM 2': {
			name: 'Scale the Mountain',
			time: '0:31.24'
		},
		'TTM 3': {
			name: 'Scary \'Shrooms, Red Coins',
			time: '0:41.34'
		},
		'TTM 4': {
			name: 'Mysterious Mountainside',
			time: '0:14.81'
		},
		'TTM 5': {
			name: 'Blast to the Lonely Mushroom',
			time: '0:14.83'
		},
		'SL 1': {
			name: 'Shell Shredding for Red Coins',
			time: '0:44.92'
		},
		'SL 2': {
			name: 'Whirl from the Freezing Pond',
			time: '0:23.58'
		},
		'SL 3': {
			name: 'Chill with the Bully',
			time: '0:16.06'
		},
		'SL 4': {
			name: 'Snowman\'s Big Head',
			time: '0:24.40'
		},
		'SL 5': {
			name: 'In the Deep Freeze',
			time: '0:09.64'
		},
		'Secret 9': {
			name: 'Toad by RR',
			time: null
		},
		'RR 1': {
			name: 'Cruiser Crossing the Rainbow',
			time: '0:31.22'
		},
		'RR 2': {
			name: 'Coins Amassed in a Maze',
			time: '0:34.81'
		},
		'RR 3': {
			name: 'Swingin\' in the Breeze',
			time: '0:21.20'
		},
		'RR 4': {
			name: 'Tricky Triangles',
			time: '0:25.70'
		},
		'TTC 1': {
			name: 'Get a Hand',
			time: '0:18.75'
		},
		'TTC 2': {
			name: 'Roll into the Cage',
			time: '0:21.33'
		},
		'TTC 3': {
			name: 'The Pit and the Pendulums',
			time: '0:23.93'
		},
		'TTC 4': {
			name: 'Timed Jumps on Moving Bars',
			time: '0:33.12'
		},
		'TTC 5': {
			name: 'Stomp on the Thwomp',
			time: '0:46.49'
		},
		'TTC 6': {
			name: 'Stop Time for Red Coins',
			time: '0:28.89'
		},
		'BitS': {
			name: 'Final Fight',
			time: '1:48.71'
		}
	}
};

function timeIntoMilliseconds(time) {
	var components = time.split(/:|\./);
	var multipliers = [10, 1000, 60 * 1000, 60 * 60 * 1000];

	components = components.reverse();

	var milliseconds = 0;

	for (var id in components) {
		milliseconds += components[id] * multipliers[id];
	}

	return milliseconds;
}

function millisecondsIntoTime(milliseconds, explicitSign) {
	milliseconds = Math.round(milliseconds / 10) * 10;

	var sign = (milliseconds < 0) ? '-' : (explicitSign ? '+' : '');

	milliseconds = Math.abs(milliseconds);

	var hours = Math.floor(milliseconds / (1000 * 60 * 60));
	var minutes = Math.floor(milliseconds / (1000 * 60)) % 60;
	var seconds = Math.floor(milliseconds / 1000) % 60;
	var centiseconds = Math.floor((milliseconds % 1000) / 10);

	var formattedTime;

	if (centiseconds < 10) {
		centiseconds = '0' + centiseconds;
	}

	if (centiseconds == 100) {
		centiseconds = '00';
	}

	formattedTime = centiseconds;

	if (seconds > 0) {
		if ((minutes > 0 || hours > 0) && seconds < 10) {
			seconds = '0' + seconds;
		}

		formattedTime = seconds + '.' + formattedTime;
	}
	else if (seconds == 0) {
		if (minutes > 0 || hours > 0) {
			formattedTime = '00' + '.' + formattedTime;
		}
		else {
			formattedTime = '0' + '.' + formattedTime;
		}
	}

	if (minutes > 0) {
		if (hours > 0 && minutes < 10) {
			minutes = '0' + minutes;
		}

		formattedTime = minutes + ':' + formattedTime;
	}
	else if (minutes == 0) {
		if (hours > 0) {
			formattedTime = '00' + ':' + formattedTime;
		}
	}

	if (hours > 0) {
		formattedTime = hours + ':' + formattedTime;
	}

	return sign + formattedTime;
}

function totalTimes(game) {
	var sum = 0;

	for (var id in splits[game]) {
		if (splits[game][id].time) {
			console.log(id + ': ' + timeIntoMilliseconds(splits[game][id].time));
			sum += timeIntoMilliseconds(splits[game][id].time);
		}
	}

	console.log(millisecondsIntoTime(sum));
}

function randomLevel(game) {
	var keys = Object.keys(splits[game]);
	var keyId = Math.floor(Math.random() * keys.length);
	var randomKey = keys[keyId];

	return randomKey + ': ' + splits[game][randomKey].name;
}

function timeSaves(game) {
	var timeSaves = [];

	for (var id in splits[game]) {
		var split = splits[game][id];
		var timeSave = timeIntoMilliseconds(split.time) - timeIntoMilliseconds(split.theory);

		timeSaves.push({ id: id, timeSave: timeSave });
	}

	timeSaves.sort(function(a, b) { return b.timeSave - a.timeSave; });

	return timeSaves;
}

function timeSave(game, split) {
	return millisecondsIntoTime(timeIntoMilliseconds(splits[game][split].time) - timeIntoMilliseconds(splits[game][split].theory));
}

$(document).ready(function() {
	var segments = timeSaves('yi');

	for (var i in segments) {
		var gameId = 'yi';
		var levelId = segments[i].id;

		var $segment = $('<div class="segment">');

		var mySegmentTime = splits[gameId][levelId].time;
		var goalSegmentTime = splits[gameId][levelId].theory;

		$segmentName = $('<div class="name">');
		$segmentName.html(levelId + ': ' + splits[gameId][levelId].name);

		$segmentMyTime = $('<div class="my time">');
		$segmentMyTimeSpan = $('<span>');
		$segmentMyTimeSpan.html(mySegmentTime);
		$segmentMyTimeInput = $('<input type="text" name="myTime" />');
		$segmentMyTimeInput.val(mySegmentTime);
		$segmentMyTime.append($segmentMyTimeSpan).append($segmentMyTimeInput);

		$segmentGoalTime = $('<div class="goal time">');
		$segmentGoalTimeSpan = $('<span>');
		$segmentGoalTimeSpan.html(goalSegmentTime);
		$segmentGoalTimeInput = $('<input type="text" name="goalTime" />');
		$segmentGoalTimeInput.val(goalSegmentTime);
		$segmentGoalTime.append($segmentGoalTimeSpan).append($segmentGoalTimeInput);

		$segmentSaveableTime = $('<div class="saveable time">');
		$segmentSaveableTimeSpan = $('<span>');
		$segmentSaveableTimeSpan.html(timeSave(gameId, levelId));
		$segmentSaveableTime.append($segmentSaveableTimeSpan);

		$segment.append($segmentName);
		$segment.append($segmentMyTime);
		$segment.append($segmentGoalTime);
		$segment.append($segmentSaveableTime);

		$('body').append($segment);
	}

	$('body').on('click', 'div.segment', function(e) {
		var $segment = $(e.currentTarget);

		$segment.toggleClass('updating');
		console.log($segment);
	});

	var str = '';

	for (i in splits['yi']) {
		str += '\'' + i + ': ' + splits['yi'][i].name.replace(/'/g, '\\\'') + '\': {' + "\r";
		str += "\t" + 'best: ' + timeIntoMilliseconds(splits['yi'][i].time) + ',' + "\r";
		str += "\t" + 'goal: ' + timeIntoMilliseconds(splits['yi'][i].theory) + "\r";
		str += '},' + "\r";
	}
		console.log(str);
});
